<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta property="og:type" content="website">
<meta property="og:title" content="Isaac Li">
<meta property="og:url" content="http://Isaac-Li.github.io/page/2/index.html">
<meta property="og:site_name" content="Isaac Li">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Isaac Li">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://Isaac-Li.github.io/page/2/"/>





  <title>Isaac Li</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Isaac Li</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">码农 + 测试</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://Isaac-Li.github.io/2018/11/03/服务器启动时自动启动-nginx-服务/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Isaac Li">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Isaac Li">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/03/服务器启动时自动启动-nginx-服务/" itemprop="url">服务器启动时自动启动 nginx 服务</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-11-03T22:52:00+08:00">
                2018-11-03
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ol>
<li><p>编辑 /etc/rc.local 文件, 加入启动 nginx 服务的命令</p>
</li>
<li><p>编辑 nginx.conf 文件， 在第一行加入下列语句即可</p>
</li>
</ol>
<p><img src="/2018/11/03/服务器启动时自动启动-nginx-服务/images/pasted-64.png" alt="upload successful"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://Isaac-Li.github.io/2018/11/03/启动-Docker-脚本/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Isaac Li">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Isaac Li">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/03/启动-Docker-脚本/" itemprop="url">进入 Docker 容器脚本</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-11-03T20:16:00+08:00">
                2018-11-03
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>进入 Docker 容器比较麻烦，不易使用，可以使用下面的脚本</p>
<p>in.sh</p>
<pre><code>#!/bin/bash
CNAME=$1
echo $1
CPID=$(docker inspect --format &quot;{{.State.Pid}}&quot; $CNAME)
nsenter --target &quot;$CPID&quot; --mount --uts --ipc --net --pid
</code></pre><p>使用方法 ./in.sh xxx    xxx 为 docker 容器名称</p>
<p>注意： 要给 in.sh 脚本可执行权限</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://Isaac-Li.github.io/2018/11/03/Hexo-后台运行/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Isaac Li">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Isaac Li">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/03/Hexo-后台运行/" itemprop="url">Hexo 后台运行</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-11-03T18:59:00+08:00">
                2018-11-03
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>使用 Hexo 服务时经常会遇到一个问题，就是退出 SSH 连接后 Hexo 的服务也退出了，遇到这种情况可以使用下面的命令启动 Hexo 服务</p>
<pre><code>nohup hexo server -d &amp;
</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://Isaac-Li.github.io/2018/10/29/Spark-RDD、DataFrame和Dataset/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Isaac Li">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Isaac Li">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/10/29/Spark-RDD、DataFrame和Dataset/" itemprop="url">Spark-RDD、DataFrame和Dataset</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-10-29T14:06:00+08:00">
                2018-10-29
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Big-Data/" itemprop="url" rel="index">
                    <span itemprop="name">Big Data</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="在什么情况下使用RDD？"><a href="#在什么情况下使用RDD？" class="headerlink" title="在什么情况下使用RDD？"></a>在什么情况下使用RDD？</h4><p>下面是使用RDD的场景和常见案例：</p>
<pre><code>1) 你希望可以对你的数据集进行最基本的转换、处理和控制；
2) 你的数据是非结构化的，比如流媒体或者字符流；
3) 你想通过函数式编程而不是特定领域内的表达来处理你的数据；
4) 你不希望像进行列式处理一样定义一个模式，通过名字或字段来处理或访问数据属性；
5) 你并不在意通过DataFrame和Dataset进行结构化和半结构化数据处理所能获得的一些优化和性能上的好处；
</code></pre><h4 id="DataFrame"><a href="#DataFrame" class="headerlink" title="DataFrame"></a>DataFrame</h4><p>与RDD相似，DataFrame也是数据的一个不可变分布式集合。但与RDD不同的是，数据都被组织到有名字的列中，就像关系型数据库中的表一样。设计DataFrame的目的就是要让对大型数据集的处理变得更简单，它让开发者可以为分布式的数据集指定一个模式，进行更高层次的抽象。</p>
<h4 id="该什么时候使用DataFrame或Dataset呢？"><a href="#该什么时候使用DataFrame或Dataset呢？" class="headerlink" title="该什么时候使用DataFrame或Dataset呢？"></a>该什么时候使用DataFrame或Dataset呢？</h4><pre><code>1) 如果你需要丰富的语义、高级抽象和特定领域专用的API，那就使用DataFrame或Dataset；
2) 如果你的处理需要对半结构化数据进行高级处理，如filter、map、aggregation、average、sum、SQL查询、列式访问或使用lambda函数，那就使用DataFrame或Dataset；
3) 如果你想在编译时就有高度的类型安全，想要有类型的JVM对象，用上Catalyst优化，并得益于Tungsten生成的高效代码，那就使用Dataset；
4) 如果你想在不同的Spark库之间使用一致和简化的API，那就使用DataFrame或Dataset；
5) 如果你是R语言使用者，就用DataFrame；
6) 如果你是Python语言使用者，就用DataFrame，在需要更细致的控制时就退回去使用RDD；
</code></pre><p><img src="/2018/10/29/Spark-RDD、DataFrame和Dataset/images/pasted-63.png" alt="upload successful"><br>上图直观地体现了DataFrame和RDD的区别。左侧的RDD[Person]虽然以Person为类型参数，但Spark框架本身不了解Person类的内部结构。而右侧的DataFrame却提供了详细的结构信息，使得Spark SQL可以清楚地知道该数据集中包含哪些列，每列的名称和类型各是什么。DataFrame多了数据的结构信息，即schema。RDD是分布式的Java对象的集合。DataFrame是分布式的Row对象的集合。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://Isaac-Li.github.io/2018/10/27/Java-并发编程最佳实践/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Isaac Li">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Isaac Li">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/10/27/Java-并发编程最佳实践/" itemprop="url">Java 并发编程最佳实践</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-10-27T21:51:00+08:00">
                2018-10-27
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index">
                    <span itemprop="name">Java</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ol>
<li>使用本地变量</li>
<li>使用不可变类</li>
<li>最小化锁的作用域范围：S=1/（1-a+a/n）</li>
<li>使用线程池的 Executor，而不是直接 new Thread</li>
<li>宁可使用同步也不要使用线程的 wait 和 notif 方法</li>
<li>使用 BlockingQueue 实现生产-消费模式</li>
<li>使用并发集合而不是加了锁的同步集合</li>
<li>使用 Semaphore 创建有届的访问</li>
<li>宁可使用同步代码块，也不使用同步的方法</li>
<li>避免使用静态变量</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://Isaac-Li.github.io/2018/10/19/Java-并发编程知识汇总/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Isaac Li">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Isaac Li">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/10/19/Java-并发编程知识汇总/" itemprop="url">Java 并发编程知识汇总</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-10-19T21:48:00+08:00">
                2018-10-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index">
                    <span itemprop="name">Java</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="1-Volatile"><a href="#1-Volatile" class="headerlink" title="1. Volatile"></a>1. Volatile</h4><p>1）Volatile 不具有原子性，不适合计数这种场景<br>    使用Volatile必须要具备两个条件：</p>
<pre><code>A。对变量的写操作不依赖当前值
B。该变量没有包含在具有其他变量不变的式子中
</code></pre><p> 适合的使用场景：</p>
<pre><code>A。特别适合状态标记量
B。Double Check
</code></pre><h4 id="2-有序性"><a href="#2-有序性" class="headerlink" title="2. 有序性"></a>2. 有序性</h4><p> 关键字与有序性：<br> Volatile 可以保证一定的有序性<br> Synchronize Lock 可以保证有序性</p>
<p> happens-before 原则</p>
<pre><code> 1）程序次序规则：一个线程内，按照代码顺序，书写在前面的操作先行发生于书写在后面的操作
2）锁定规则：一个unlock操作先行发生于后面对同一个锁的lock操作
3）Volatile变量规则：对一个变量的写操作先行发生于后面对这个变量的读操作
4）传递规则：如果操作A先行发生于操作B，而操作B又先行发生于操作C，则可以得出操作A先行发生于操作C
5）线程启动规则：Thread对象的start（）方法先行发生于此线程的每一个动作
6）线程中断规则：对线程interrupt（）方法的调用先行发生于被中断线程的代码检测到中断事件的发生
7）线程终结规则：线程中所有的操作都先行发生于线程的终止检测，我们可以通过Thread.join（）方法结束、Thread.isAlive（）的返回值手段检测到线程已经终止执行
8）对象终结规则：一个对象的初始化完成先行发生于他的finalize（）方法的开始
</code></pre><h4 id="3-安全发布对象"><a href="#3-安全发布对象" class="headerlink" title="3. 安全发布对象"></a>3. 安全发布对象</h4><p>参考单例模式</p>
<pre><code>1）在静态初始化函数中初始化一个对象引用
2）将对象的引用保存到volatile类型域或者AtomicReference对象
3）将对象的引用保存到某个正确构造对象的final类型中
4）将对象的引用保存到一个由锁保护的域中
</code></pre><p>单例对象 volatile + 双重检测机制 -&gt;禁止指令重排</p>
<p><img src="/2018/10/19/Java-并发编程知识汇总/images/pasted-61.png" alt="upload successful"><br>单例模式-枚举模式 使用枚举来实例化最安全，JVM保证枚举初始化只调用一次。相比于懒汉模式，安全性更容易保证，相比于饿汉模式是在实际调用的时候才初始化实例。推荐使用。</p>
<p><img src="/2018/10/19/Java-并发编程知识汇总/images/pasted-60.png" alt="upload successful"></p>
<h4 id="4-避免并发的方法"><a href="#4-避免并发的方法" class="headerlink" title="4 避免并发的方法"></a>4 避免并发的方法</h4><pre><code>1）使用不可变对象
2）线程封闭
   A。Ad-hoc 线程封闭：程序控制实现，最糟糕，忽略
   B。堆栈封闭：局部变量，无并发问题。能用局部变量的就不用全局变量，全局变量容易引起并发问题。
   C。ThreadLocal 线程封闭：利用 map 实现了线程封闭
</code></pre><h4 id="5-线程安全与不安全的类"><a href="#5-线程安全与不安全的类" class="headerlink" title="5. 线程安全与不安全的类"></a>5. 线程安全与不安全的类</h4><pre><code>线程不安全的类              线程安全的类
StringBuilder                StringBuffer
SimpleDateFormat             Datetime(Joda-Time包）
ArrayList                    Vector  Stack
HashSet 
HashMap                      HashTable 
                             Collections.synchronizedXXX (List Set Map)
</code></pre><p>使用同步容器时，不一定能做到所有场合都是线程安全的。Vector 也可能出现线程不安全的情况</p>
<p><img src="/2018/10/19/Java-并发编程知识汇总/images/pasted-62.png" alt="upload successful"></p>
<p>线程不安全写法：先检查再执行  if(condition(a)) { handle(a);}</p>
<p>注意：如果对象是多线程共享的，解决方法是加锁，或者保证上述两个操作是原子性的。</p>
<p><strong>注意事项</strong></p>
<p>1） 在使用 Foreach 或 iterator 时操作集合时，尽量不要在操作的过程中进行 Remove 的操作。如果一定要进行 Remove 操作，建议在遍历的过程中先进行标记，在遍历完成后再进行 Remove 的操作。或者使用 for 循环进行增删操作的遍历。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://Isaac-Li.github.io/2018/10/19/Eclipse-Slf4j-的配置与使用/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Isaac Li">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Isaac Li">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/10/19/Eclipse-Slf4j-的配置与使用/" itemprop="url">Eclipse-Slf4j 的配置与使用</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-10-19T14:32:00+08:00">
                2018-10-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index">
                    <span itemprop="name">Java</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="1-安装-lombok"><a href="#1-安装-lombok" class="headerlink" title="1. 安装 lombok"></a>1. 安装 lombok</h4><pre><code>方法参加  https://projectlombok.org/setup/eclipse
</code></pre><h4 id="2-错误处理"><a href="#2-错误处理" class="headerlink" title="2. 错误处理"></a>2. 错误处理</h4><p>lombok 安装后，在Java代码中是 @Slj4j 注解时编译通过，运行时抛错</p>
<p><strong>错误Failed to load class org.slf4j.impl.StaticLoggerBinder </strong></p>
<p>下面信息是官方给出的解决方案 <a href="https://www.slf4j.org/codes.html" target="_blank" rel="noopener">https://www.slf4j.org/codes.html</a></p>
<p>Failed to load class org.slf4j.impl.StaticLoggerBinder</p>
<p>This warning message is reported when the org.slf4j.impl.StaticLoggerBinder class could not be loaded into memory. This happens when no appropriate SLF4J binding could be found on the class path. Placing one (and only one) of slf4j-nop.jar slf4j-simple.jar, slf4j-log4j12.jar, slf4j-jdk14.jar or logback-classic.jar on the class path should solve the problem.</p>
<p>SINCE 1.6.0 As of SLF4J version 1.6, in the absence of a binding, SLF4J will default to a no-operation (NOP) logger implementation.</p>
<p>If you are responsible for packaging an application and do not care about logging, then placing slf4j-nop.jar on the class path of your application will get rid of this warning message. Note that embedded components such as libraries or frameworks should not declare a dependency on any SLF4J binding but only depend on slf4j-api. When a library declares a compile-time dependency on a SLF4J binding, it imposes that binding on the end-user, thus negating SLF4J’s purpose.</p>
<p>解决办法：pom文件中加入 slf4j-log4j12 的引用，特别注意 Scope, 默认是 test，可以删除 scope</p>
<p>修改后运行 java 项目，出现下列警告，但是控制台不能正常输出信息。</p>
<pre><code>log4j:WARN No appenders could be found for logger.
log4j:WARN Please initialize the log4j system properly.
log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.
</code></pre><h4 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h4><p>A. 修改 pom 文件里的引用，删除 slf4j-log4j12 引用，加入 log4j-slf4j-impl 和 log4j-core 引用。<br>    <dependencies></dependencies></p>
<pre><code>&lt;!-- https://mvnrepository.com/artifact/org.projectlombok/lombok --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;
    &lt;artifactId&gt;lombok&lt;/artifactId&gt;
    &lt;version&gt;1.18.2&lt;/version&gt;
    &lt;scope&gt;provided&lt;/scope&gt;
&lt;/dependency&gt;

&lt;!-- https://mvnrepository.com/artifact/org.slf4j/slf4j-api --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;
    &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;
    &lt;version&gt;1.7.25&lt;/version&gt;
&lt;/dependency&gt;

&lt;!-- https://mvnrepository.com/artifact/org.apache.logging.log4j/log4j-slf4j-impl --&gt;
&lt;dependency&gt;
  &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;
  &lt;artifactId&gt;log4j-slf4j-impl&lt;/artifactId&gt;
  &lt;version&gt;2.1&lt;/version&gt;
&lt;/dependency&gt;

&lt;!-- https://mvnrepository.com/artifact/org.apache.logging.log4j/log4j-core --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;
    &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;
    &lt;version&gt;2.1&lt;/version&gt;
&lt;/dependency&gt;

&lt;/dependencies&gt;    
</code></pre><p>B. 在 src 目录下创建 resources 目录，并创建 log4j2.xml 文件，文件内容如下 </p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
</code></pre><!--设置log4j2的自身log级别为warn-->
<pre><code>&lt;configuration status=&quot;info&quot;&gt;

&lt;appenders&gt;
    &lt;console name=&quot;Console&quot; target=&quot;SYSTEM_OUT&quot;&gt;
        &lt;PatternLayout pattern=&quot;[%d{HH:mm:ss:SSS}] [%p] - %l - %m%n&quot;/&gt;
    &lt;/console&gt;

    &lt;RollingFile name=&quot;RollingFileInfo&quot; fileName=&quot;${sys:user.home}/logs/hpaasvc/info.log&quot;
                 filePattern=&quot;${sys:user.home}/logs/hpaasvc/$${date:yyyy-MM}/info-%d{yyyy-MM-dd}-%i.log&quot;&gt;
        &lt;Filters&gt;
            &lt;ThresholdFilter level=&quot;INFO&quot;/&gt;
            &lt;ThresholdFilter level=&quot;WARN&quot; onMatch=&quot;DENY&quot; onMismatch=&quot;NEUTRAL&quot;/&gt;
        &lt;/Filters&gt;
        &lt;PatternLayout pattern=&quot;[%d{HH:mm:ss:SSS}] [%p] - %l - %m%n&quot;/&gt;
        &lt;Policies&gt;
            &lt;TimeBasedTriggeringPolicy/&gt;
            &lt;SizeBasedTriggeringPolicy size=&quot;100 MB&quot;/&gt;
        &lt;/Policies&gt;
    &lt;/RollingFile&gt;

    &lt;RollingFile name=&quot;RollingFileWarn&quot; fileName=&quot;${sys:user.home}/logs/hpaasvc/warn.log&quot;
                 filePattern=&quot;${sys:user.home}/logs/hpaasvc/$${date:yyyy-MM}/warn-%d{yyyy-MM-dd}-%i.log&quot;&gt;
        &lt;Filters&gt;
            &lt;ThresholdFilter level=&quot;WARN&quot;/&gt;
            &lt;ThresholdFilter level=&quot;ERROR&quot; onMatch=&quot;DENY&quot; onMismatch=&quot;NEUTRAL&quot;/&gt;
        &lt;/Filters&gt;
        &lt;PatternLayout pattern=&quot;[%d{HH:mm:ss:SSS}] [%p] - %l - %m%n&quot;/&gt;
        &lt;Policies&gt;
            &lt;TimeBasedTriggeringPolicy/&gt;
            &lt;SizeBasedTriggeringPolicy size=&quot;100 MB&quot;/&gt;
        &lt;/Policies&gt;
    &lt;/RollingFile&gt;

    &lt;RollingFile name=&quot;RollingFileError&quot; fileName=&quot;${sys:user.home}/logs/hpaasvc/error.log&quot;
                 filePattern=&quot;${sys:user.home}/logs/hpaasvc/$${date:yyyy-MM}/error-%d{yyyy-MM-dd}-%i.log&quot;&gt;
        &lt;ThresholdFilter level=&quot;ERROR&quot;/&gt;
        &lt;PatternLayout pattern=&quot;[%d{HH:mm:ss:SSS}] [%p] - %l - %m%n&quot;/&gt;
        &lt;Policies&gt;
            &lt;TimeBasedTriggeringPolicy/&gt;
            &lt;SizeBasedTriggeringPolicy size=&quot;100 MB&quot;/&gt;
        &lt;/Policies&gt;
    &lt;/RollingFile&gt;

&lt;/appenders&gt;

&lt;loggers&gt;
    &lt;!--过滤掉spring和hibernate的一些无用的debug信息--&gt;
    &lt;logger name=&quot;org.springframework&quot; level=&quot;INFO&quot;&gt;
    &lt;/logger&gt;
    &lt;logger name=&quot;org.hibernate&quot; level=&quot;INFO&quot;&gt;
    &lt;/logger&gt;
    &lt;root level=&quot;all&quot;&gt;
        &lt;appender-ref ref=&quot;Console&quot;/&gt;
        &lt;appender-ref ref=&quot;RollingFileInfo&quot;/&gt;
        &lt;appender-ref ref=&quot;RollingFileWarn&quot;/&gt;
        &lt;appender-ref ref=&quot;RollingFileError&quot;/&gt;
    &lt;/root&gt;
&lt;/loggers&gt;

&lt;/configuration&gt;
</code></pre><p>C. 把 resources 目录加入 Java build Path</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://Isaac-Li.github.io/2018/10/12/Flume：使用HBaseSinks时遇到的问题汇总/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Isaac Li">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Isaac Li">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/10/12/Flume：使用HBaseSinks时遇到的问题汇总/" itemprop="url">Flume：使用HBaseSinks时遇到的问题汇总</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-10-12T17:19:00+08:00">
                2018-10-12
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Big-Data/" itemprop="url" rel="index">
                    <span itemprop="name">Big Data</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong>版本问题</strong> 在 HBase v2.1.0——Flume v1.8.0 环境下，如果使用 asynchbase 作为 sink’s type 的话，会报异常 </p>
<p><img src="/2018/10/12/Flume：使用HBaseSinks时遇到的问题汇总/images/pasted-56.png" alt="upload successful"></p>
<p><strong>解决办法</strong> 使用 HBbase v1.2.7</p>
<p><strong>启动flume服务时抛异常</strong> 这类异常主要是 java.lang.NoClassDefFoundError 找不类定义异常。</p>
<p><strong>解决办法</strong> 把 hadoop-common.jar hbase-common.jar zookeeper.jar 文件拷贝到 flume/lib 目录下</p>
<p><img src="/2018/10/12/Flume：使用HBaseSinks时遇到的问题汇总/images/pasted-57.png" alt="upload successful"><br>对于这个异常，需要下载 woodstox-core-5.0.3.jar  stax2-api-4.0.0.jar,并拷贝到 flume/lib 目录下</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://Isaac-Li.github.io/2018/10/09/Eclipse-编译-Flume/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Isaac Li">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Isaac Li">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/10/09/Eclipse-编译-Flume/" itemprop="url">Eclipse:编译 Flume 问题汇总</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-10-09T13:07:00+08:00">
                2018-10-09
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Big-Data/" itemprop="url" rel="index">
                    <span itemprop="name">Big Data</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong>问题描述</strong>：在 Eclipse 中导入 Flume1.8.0 maven工程，出现错误信息 “AvroFlumeEvent cannot be resolved to a type”</p>
<p><strong>问题原因</strong>：AvroFlumeEvent 的定义存在于 apache-flume-1.8.0-src\flume-ng-sdk\src\main\avro\flume.avdl 文件里</p>
<p><strong>解决办法</strong>：</p>
<ol>
<li>先用maven编译 mvn clean compile</li>
<li>再把编译出的 Java 文件加入 Build Path。选择 flume-ng-sdk，右键选择 Config Build Path，在 Source 页点击”Add Folder…”, 加入路径 flume-ng-sdk/target/generated-sources/avro</li>
</ol>
<p><strong>问题描述</strong>：在 Eclipse 中导入 Flume1.8.0 maven工程，出现错误信息 “AvroFlumeOGEvent cannot be resolved to a type” “FlumeOGEventAvroServer cannot be resolved to a type” “Priority cannot be reolved to a variable”</p>
<p><strong>问题原因</strong>: 这三项的定义存在于 apache-flume-1.8.0-src\flume-ng-legacy-sources\flume-avro-source\src\main\avro\flumeCompatibility.avdl 文件里</p>
<p><strong>解决办法</strong>：</p>
<ol>
<li>先用maven编译 mvn clean compile</li>
<li>再把编译出的 Java 文件加入 Build Path。选择 flume-avro-source，右键选择 Config Build Path，在 Source 页点击”Add Folder…”, 加入路径 flume-ng-legacy-sources\flume-avro-source\target\generated-sources\avro\com\cloudera\flume\handlers\avro </li>
</ol>
<p><img src="/2018/10/09/Eclipse-编译-Flume/images/pasted-55.png" alt="upload successful"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://Isaac-Li.github.io/2018/09/21/Hadoop-3-1-0-配置问题汇总/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Isaac Li">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Isaac Li">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/09/21/Hadoop-3-1-0-配置问题汇总/" itemprop="url">Hadoop 3.1.0 配置问题汇总</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-09-21T13:30:00+08:00">
                2018-09-21
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Big-Data/" itemprop="url" rel="index">
                    <span itemprop="name">Big Data</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="1-格式化Name-Node时报-URI错误："><a href="#1-格式化Name-Node时报-URI错误：" class="headerlink" title="1. 格式化Name Node时报 URI错误："></a>1. 格式化Name Node时报 URI错误：</h4><p>hdfs-site.xml 文件中 dfs.namenode.name.dir 配置存在问题，应该是 file:///，注意，这里是三个斜杠</p>
<h4 id="2-hdfs-的web-server-默认的端口号已变为-9870"><a href="#2-hdfs-的web-server-默认的端口号已变为-9870" class="headerlink" title="2. hdfs 的web server 默认的端口号已变为 9870"></a>2. hdfs 的web server 默认的端口号已变为 9870</h4><h4 id="3-用-IE-浏览器打开-NN-的界面时出错"><a href="#3-用-IE-浏览器打开-NN-的界面时出错" class="headerlink" title="3. 用 IE 浏览器打开 NN 的界面时出错"></a>3. 用 IE 浏览器打开 NN 的界面时出错</h4><p>错误信息是 NameNode is still loading, Redirecting to the Startup Progress page.</p>
<p>解决办法：用chrome浏览器</p>
<h4 id="4-运行-mapreduce-时出错"><a href="#4-运行-mapreduce-时出错" class="headerlink" title="4. 运行 mapreduce 时出错"></a>4. 运行 mapreduce 时出错</h4><p>错误信息：Could not find or load main class org.apache.hadoop.mapreduce.v2.app.MRAppMaster</p>
<p>原因：yarn-site.xml 中，yarn.application.classpath 未配置</p>
<p>解决办法：</p>
<pre><code>&lt;property&gt;
    &lt;name&gt;yarn.application.classpath&lt;/name&gt;
    &lt;value&gt;
        /opt/hadoop-3.1.0/etc/hadoop,
        /opt/hadoop-3.1.0/share/hadoop/common/*,
        /opt/hadoop-3.1.0/share/hadoop/common/lib/*,
        /opt/hadoop-3.1.0/share/hadoop/hdfs/*,
        /opt/hadoop-3.1.0/share/hadoop/hdfs/lib/*,
        /opt/hadoop-3.1.0/share/hadoop/mapreduce/*,
        /opt/hadoop-3.1.0/share/hadoop/mapreduce/lib/*,
        /opt/hadoop-3.1.0/share/hadoop/yarn/*,
        /opt/hadoop-3.1.0/share/hadoop/yarn/lib/*
    &lt;/value&gt;
&lt;/property&gt;
</code></pre><h4 id="5-运行-start-dfs-sh-脚本不能启动全部-DataNode"><a href="#5-运行-start-dfs-sh-脚本不能启动全部-DataNode" class="headerlink" title="5. 运行 start-dfs.sh 脚本不能启动全部 DataNode"></a>5. 运行 start-dfs.sh 脚本不能启动全部 DataNode</h4><p>Hadoop v2.x 使用 slaves 文件，Hadoop v3.x 使用 workers 文件</p>
<p>解决办法： List all worker hostnames or IP addresses in your etc/hadoop/workers file, one per line. Helper scripts (described below) will use the etc/hadoop/workers file to run commands on many hosts at once.</p>
<h4 id="6-运行-hdfs-zkfc-formatZK-报错"><a href="#6-运行-hdfs-zkfc-formatZK-报错" class="headerlink" title="6. 运行 hdfs zkfc -formatZK 报错"></a>6. 运行 hdfs zkfc -formatZK 报错</h4><p>错误信息：FATAL tools.DFSZKFailoverController: DFSZKFailOverController exiting due to earlier exception java.lang.NumberFormatException: For input string: “2181”</p>
<p>原因： core-site.xml 文件中配置 ha.zookeeper.quorum 时，value值最后有空格。</p>
<h4 id="7-启动-zkfc-时报错"><a href="#7-启动-zkfc-时报错" class="headerlink" title="7. 启动 zkfc 时报错"></a>7. 启动 zkfc 时报错</h4><p>错误信息：ERROR：cannot set priority of zkfc process. 检查log文件，发现详细信息，Automatic failover is not enabled for NameNode.</p>
<p>解决办法：把 NameNode1上修改的配置文件 core-site.xml 和 hdfs-site.xml 文件复制到 NameNode2 上。</p>
<h4 id="8-启动-hbase-时报错"><a href="#8-启动-hbase-时报错" class="headerlink" title="8. 启动 hbase 时报错"></a>8. 启动 hbase 时报错</h4><p>错误信息：java.net.ConnectException: Call From bigdata01.isaac.com to bigdata01.isaac.com:8020 failed on connection exception: java.net.Connection</p>
<p>Exception: Connection refused</p>
<p>解决办法：查看 hadoop的 core-site.xml 文件，看 fs.defaultFS 配置的端口号，然后修改 hbase-site.xml 配置。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.jpg"
                alt="Isaac Li" />
            
              <p class="site-author-name" itemprop="name">Isaac Li</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">44</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">9</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">36</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/Isaac-Li" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i></a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:lee_isaac@163.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i></a>
                  </span>
                
            </div>
          

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-inline">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                Links
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="https://www.deeplearning.ai/" title="deeplearning.ai" target="_blank">deeplearning.ai</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="http://www.ai-start.com/" title="AI初学者" target="_blank">AI初学者</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://www.fast.ai/" title="fast.ai" target="_blank">fast.ai</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://www.ibm.com/developerworks/cn/" title="IBM Developer" target="_blank">IBM Developer</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="http://www.odi.ch/prog/design/newbies.php" title="Java Anti-Patterns" target="_blank">Java Anti-Patterns</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="http://timdettmers.com/" title="Tim Dettmers's blog" target="_blank">Tim Dettmers's blog</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="http://colah.github.io/" title="colash's blog" target="_blank">colash's blog</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="http://www.ruanyifeng.com/blog/" title="阮一峰的网络日志" target="_blank">阮一峰的网络日志</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://dylandjian.github.io/" title="Dylan's blog" target="_blank">Dylan's blog</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="http://shartoo.github.io/" title="shartoo's blog" target="_blank">shartoo's blog</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://www.dataquest.io/blog/" title="DATAQUEST" target="_blank">DATAQUEST</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="http://cmsblogs.com/" title="Java技术驿站" target="_blank">Java技术驿站</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://www.w3schools.com/default.asp" title="w3schools" target="_blank">w3schools</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="http://tool.oschina.net/regex" title="在线正则表达式测试" target="_blank">在线正则表达式测试</a>
                  </li>
                
              </ul>
            </div>
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Isaac Li</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
